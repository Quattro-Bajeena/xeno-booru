@model XenoBooru.Web.ViewModels.PostSearchViewModel
@using XenoBooru.Core.Utilities
@{
	ViewData["Title"] = "Maps";
}

@section Stylesheets{
	<link rel="stylesheet" href="~/css/post_index.css" />
}


@section Sidebar{
	<form class="sidebar-section" id="search" asp-controller="Post" asp-action="Index" method="get">
		<h4>Search</h4>
		<input class="search-bar" type="text" name="tags" autocomplete="off" value="@Model.SearchedTagsStr">
	</form>
	<div class="sidebar-section" id="tags">
		<h4>Tags</h4>
		<ul>
			@foreach (Tag tag in Model.Tags)
			{
			<li class="tag" id="tag-@tag.Name">
				<a class="tag-@tag.Type" asp-route-tags="@tag.Name">@tag.ToString()</a>&nbsp;<span class="tag-count">@tag.PostCount</span>
			</li>
			}
		</ul>
	</div>
	<div class="sidebar-section" id="options">
		<h4>Options</h4>
        <h4>
            <label for="pending-checkbox">Pending</label>
            <input type="checkbox" id="pending-checkbox" name="show-pending"/>
        </h4>
		<a asp-action="Upload">Upload</a>
	</div>
}


@if (Model.Posts.Count == 0)
{
	<h4 class="no-entries">It's okay not to feel `whole'. Even if you feel only partly complete, if you repeat that enough, it'll eventually be `whole'. A part... is better than zero</h4>
}
<ul id="posts">


	@foreach (Post post in Model.Posts)
	{
		<li id="post-@post.Id" class="post-preview">
			<a asp-controller="Post" asp-action="Show" asp-route-id="@post.Id">

				<img 
					 class="pending-@post.Pending liked-@(post.Likes > 10)" 
					 src="@PostUtilities.ThumbnailUrl(Model.ContainerUrl, Model.AudioThumbnailFileName, post)"
				>
			</a>
		</li>
	}
</ul>

@*<div id="paginator">
	<a class="nav-button">PREVIOUS</a>
	<a class="nav-button">1</a>
	<a class="nav-button">2</a>
	<a class="nav-button">3</a>
	<a class="nav-button">NEXT</a>
</div>*@

@section Scripts{ 
	<script>
		const posts = @Html.Raw(Json.Serialize(Model.Posts));
		const tags = @Html.Raw(Json.Serialize(Model.Tags));
	</script>
	<script src="~/js/tag_highlight_posts.js" type="module"></script>
	<script src="~/js/post_index.js" type="module"></script>

}
